(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var s in a)e.o(a,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:a[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,a=window.wp.apiFetch;var s=e.n(a);const n=window.ReactJSXRuntime,d=wp.element.useState,i=wp.element.useEffect,r=()=>{const[e,t]=d(null),[a,r]=d({api_key:""}),[l,o]=d(!0),[c,h]=d(1),[p,u]=d(1);return i((()=>{(async()=>{const e=await s()({path:`/wp/v2/pages?page=${c}&per_page=10`,parse:!1}),a=await e.json(),n=parseInt(e.headers.get("X-WP-TotalPages"),10);u(n),t(a);const d=await s()({path:"/cords/v1/options"});r(d),o(!1)})()}),[l]),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"CORDS"}),(0,n.jsx)("p",{children:"Welcome to the CORDS admin dashboard."}),(0,n.jsx)("hr",{}),(0,n.jsx)("h3",{children:"Pages"}),(0,n.jsx)("p",{children:"Select which pages you would like to enable CORDS and/or the widget on."}),(0,n.jsxs)("table",{className:"wp-list-table widefat fixed striped table-view-list",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Title"}),(0,n.jsx)("th",{children:"CORDS Widget"})]})}),(0,n.jsx)("tbody",{children:null!==e&&e.map((e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.title.rendered.length?e.title.rendered:"No Title"}),(0,n.jsx)("td",{children:(0,n.jsxs)("select",{name:"enabled",value:e.meta.cords_widget?"true":"false",onChange:t=>{(async({id:e,meta:t})=>{await s()({method:"POST",path:`/wp/v2/pages/${e}`,data:{meta:t}})})({id:e.id,meta:{...e.meta,cords_widget:"true"===t.target.value}}).then((()=>{o(!0)}))},children:[(0,n.jsx)("option",{value:"true",children:"Show"}),(0,n.jsx)("option",{value:"false",children:"Hide"})]})})]},e.id)))})]}),(0,n.jsxs)("div",{style:{marginTop:"1rem",display:"flex",alignItems:"center",gap:"1rem"},children:[(0,n.jsx)("button",{onClick:()=>{c>1&&(h(c-1),o(!0))},disabled:1===c,className:"button",children:"← Previous"}),(0,n.jsxs)("span",{children:["Page ",c," of ",p]}),(0,n.jsx)("button",{onClick:()=>{c<p&&(h(c+1),o(!0))},disabled:c===p,className:"button",children:"Next →"})]}),(0,n.jsx)("h3",{children:"API Key"}),(0,n.jsxs)("p",{children:["Enter your CORDS API key below. This can be found at"," ",(0,n.jsx)("a",{href:"https://partners.cords.ai",children:"https://partners.cords.ai"})]}),(0,n.jsx)("input",{type:"text",value:a.api_key,onChange:e=>{r({api_key:e.target.value})}}),(0,n.jsx)("button",{onClick:()=>{(async e=>{await s()({method:"POST",path:"/cords/v1/options",data:e})})(a)},children:"Save"})]})};(0,t.render)((0,n.jsx)(r,{}),document.getElementById("cords"))})();